@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* =============================================================================
   THEME CSS CUSTOM PROPERTIES

   This file defines all design tokens as CSS custom properties.
   The default is dark mode. Light mode is activated by removing the .dark class
   from the html element, or by setting data-theme="light".

   Naming Convention:
   --color-{category}-{variant}
   --{property}-{variant}

   Categories: base, surface, text, border, accent, cta, callout
   ============================================================================= */

@theme inline {
  /* =========================================================================
     DARK THEME (Default) - Custom Properties
     ========================================================================= */

  /* Backgrounds */
  --color-base: #0A1425;
  --color-surface: #070F1B;
  --color-surface-elevated: #111F35;
  --color-overlay: rgba(10, 20, 37, 0.6);
  --color-footer-reveal: #050C16;
  --color-code-block: #0D1A2D;
  --color-code-title: #111F35;

  /* Text Colors */
  --color-text-primary: rgba(255, 255, 255, 0.9);
  --color-text-secondary: rgba(255, 255, 255, 0.65);
  --color-text-muted: rgba(255, 255, 255, 0.5);
  --color-text-emphasis: rgba(255, 255, 255, 0.95);
  --color-text-inverted: #0A1425;

  /* Primary Accent Colors (green) */
  --color-accent: #1D9B69;
  --color-accent-light: #2AAE79;
  --color-accent-dark: #178556;

  /* Secondary Accent Colors (blue) */
  --color-accent-secondary: #2563eb;
  --color-accent-secondary-light: #3b82f6;
  --color-accent-secondary-dark: #1d4ed8;

  /* Designer-approved solid colors */
  --color-highlight: #1D9B69;
  --color-cta: #1D9B69;
  --color-cta-text: #fcfcfc;
  --color-cta-hover: #2AAE79;
  --color-cta-shadow: rgba(29, 155, 105, 0.25);

  /* Border Colors */
  --color-border: #1A2A45;
  --color-border-light: #2A3A55;
  --color-border-subtle: #1A2A45;
  --color-border-emphasis: #3A4A65;
  --color-border-focus: #1D9B69;
  --color-hr: #1A2A45;

  /* Selection */
  --color-selection-bg: rgba(29, 155, 105, 0.3);
  --color-selection-text: #2AAE79;

  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 2px 4px -2px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
    0 4px 6px -4px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
    0 8px 10px -6px rgba(0, 0, 0, 0.1);
  --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  --shadow-cta-glow: 0 10px 15px -3px rgba(29, 155, 105, 0.25);
  --shadow-green-glow: 0 10px 15px -3px rgba(42, 174, 121, 0.25);
  --shadow-mega-menu: 0 20px 70px -15px rgba(29, 155, 105, 0.3);
  --shadow-footer-glow: 0 20px 80px 20px rgba(29, 155, 105, 0.12),
    0 8px 30px 5px rgba(29, 155, 105, 0.08);

  /* Opacity Scales */
  --opacity-text-primary: 0.9;
  --opacity-text-secondary: 0.65;
  --opacity-text-muted: 0.5;
  --opacity-overlay: 0.6;
  --opacity-pattern: 0.015;
  --opacity-disabled: 0.5;

  /* Accent Opacity Scales (for bg-accent/10 patterns) */
  --opacity-accent-subtle: 0.05;
  --opacity-accent-light: 0.1;
  --opacity-accent-medium: 0.2;
  --opacity-accent-strong: 0.3;
  --opacity-accent-border-subtle: 0.2;
  --opacity-accent-border-medium: 0.3;
  --opacity-accent-border-strong: 0.5;

  /* Callout Colors - Info (Blue) */
  --color-callout-info-bg: rgba(59, 130, 246, 0.05);
  --color-callout-info-border: rgba(59, 130, 246, 0.2);
  --color-callout-info-icon: #60a5fa;
  --color-callout-info-icon-bg: rgba(59, 130, 246, 0.1);

  /* Callout Colors - Warning (Amber) */
  --color-callout-warning-bg: rgba(245, 158, 11, 0.05);
  --color-callout-warning-border: rgba(245, 158, 11, 0.2);
  --color-callout-warning-icon: #fbbf24;
  --color-callout-warning-icon-bg: rgba(245, 158, 11, 0.1);

  /* Callout Colors - Error (Red) */
  --color-callout-error-bg: rgba(239, 68, 68, 0.05);
  --color-callout-error-border: rgba(239, 68, 68, 0.2);
  --color-callout-error-icon: #f87171;
  --color-callout-error-icon-bg: rgba(239, 68, 68, 0.1);

  /* Callout Colors - Success (Green) */
  --color-callout-success-bg: rgba(34, 197, 94, 0.05);
  --color-callout-success-border: rgba(34, 197, 94, 0.2);
  --color-callout-success-icon: #4ade80;
  --color-callout-success-icon-bg: rgba(34, 197, 94, 0.1);

  /* Callout Colors - Tip (Purple) */
  --color-callout-tip-bg: rgba(168, 85, 247, 0.05);
  --color-callout-tip-border: rgba(168, 85, 247, 0.2);
  --color-callout-tip-icon: #c084fc;
  --color-callout-tip-icon-bg: rgba(168, 85, 247, 0.1);

  /* Callout Colors - Note (Green) */
  --color-callout-note-bg: rgba(29, 155, 105, 0.05);
  --color-callout-note-border: rgba(29, 155, 105, 0.2);
  --color-callout-note-icon: #2AAE79;
  --color-callout-note-icon-bg: rgba(29, 155, 105, 0.1);

  /* Code Block Colors */
  --color-code-highlight-bg: rgba(29, 155, 105, 0.1);
  --color-code-highlight-border: #2AAE79;
  --color-code-highlight-word: rgba(29, 155, 105, 0.2);
  --color-code-line-numbers: rgba(255, 255, 255, 0.5);
  --color-code-border: #1A2A45;
  --color-code-window-close: #ff5f57;
  --color-code-window-minimize: #febc2e;
  --color-code-window-maximize: #28c840;

  /* Prose/Typography */
  --color-prose-body: rgba(255, 255, 255, 0.65);
  --color-prose-headings: rgba(255, 255, 255, 0.9);
  --color-prose-lead: rgba(255, 255, 255, 0.65);
  --color-prose-links: #1D9B69;
  --color-prose-bold: rgba(255, 255, 255, 0.9);
  --color-prose-counters: rgba(255, 255, 255, 0.5);
  --color-prose-bullets: #2AAE79;
  --color-prose-quotes: rgba(255, 255, 255, 0.65);
  --color-prose-quote-borders: #2AAE79;
  --color-prose-captions: rgba(255, 255, 255, 0.5);
  --color-prose-code: #1D9B69;
  --color-prose-pre-code: rgba(255, 255, 255, 0.9);
  --color-prose-pre-bg: #111F35;
  --color-prose-table-borders: #1A2A45;
  --color-prose-link-underline: rgba(29, 155, 105, 0.5);
  --color-prose-link-underline-hover: rgba(29, 155, 105, 1);
  --color-blockquote-bg: rgba(29, 155, 105, 0.08);

  /* Cal.com Integration */
  --color-cal-bg: #111F35;
  --color-cal-bg-emphasis: #1A2A45;
  --color-cal-border: #2A3A55;
  --color-cal-border-emphasis: #3A4A65;
  --color-cal-border-subtle: #1A2A45;
  --color-cal-text: rgba(255, 255, 255, 0.9);
  --color-cal-text-emphasis: rgba(255, 255, 255, 0.95);
  --color-cal-text-muted: rgba(255, 255, 255, 0.65);
  --color-cal-text-subtle: rgba(255, 255, 255, 0.5);
  --color-cal-brand: #2AAE79;
  --color-cal-brand-emphasis: #1D9B69;
  --color-cal-brand-text: #ffffff;

  /* Component-specific */
  --color-spotlight-fill: rgba(29, 155, 105, 0.4);
  --color-nav-overlay: rgba(10, 20, 37, 0.6);
  --color-scroll-indicator-border: #1A2A45;
  --color-scroll-indicator-dot: rgba(255, 255, 255, 0.5);
  --color-tracing-beam-dot-active: #ffffff;
  --color-tracing-beam-dot-inactive: #2AAE79;
  --color-tracing-beam-border-active: #ffffff;
  --color-tracing-beam-border-inactive: #1D9B69;
  --color-tracing-beam-line: #9091a0;

  /* SVG Grid Pattern */
  --color-svg-grid: #e5e7eb;

  /* Legacy aliases for compatibility */
  --color-background: #0A1425;
  --color-foreground: rgba(255, 255, 255, 0.9);
  --color-muted: rgba(255, 255, 255, 0.5);
  --color-accent: #1D9B69;
  --color-accent-secondary: #2563eb;

  /* Font families */
  --font-outfit: var(--font-outfit);
  --font-inter: var(--font-inter);

  /* shadcn/ui compatibility variables */
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-muted-foreground: var(--muted-foreground);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

/* =============================================================================
   LIGHT THEME OVERRIDES
   Activated when html has data-theme="light" or no .dark class

   Color Palette:
   - Background: #F8F7F9 (off-white with subtle purple tint)
   - Text: #2B2D42 (dark navy with blue undertone)
   - Accent: #92DCE5 (bright cyan) with darker variations for CTAs
   ============================================================================= */

:root[data-theme="light"],
html:not(.dark) {
  /* Backgrounds - Based on #F8F7F9 */
  --color-base: #f8f7f9;
  --color-surface: #efeef1;
  --color-surface-elevated: #ffffff;
  --color-overlay: rgba(43, 45, 66, 0.5);
  --color-footer-reveal: #edeced;
  /* Code blocks stay dark for readability */

  /* Text Colors - Based on #2B2D42 */
  --color-text-primary: #2b2d42;
  --color-text-secondary: #4a4c61;
  --color-text-muted: #6e7087;
  --color-text-emphasis: #1a1b2e;
  --color-text-inverted: #f8f7f9;

  /* Primary Accent Colors (currently cyan - change these to rebrand) */
  /* For light mode, we need DARKER accent colors for text contrast */
  --color-accent: #0e8a94;
  --color-accent-light: #0a7a84;
  --color-accent-dark: #086872;

  /* CTA Colors - Dark cyan for button contrast */
  --color-cta: #0a7a84;
  --color-cta-text: #ffffff;
  --color-cta-hover: #086872;
  --color-cta-shadow: rgba(10, 122, 132, 0.25);

  /* Highlight - Dark cyan for links and highlights */
  --color-highlight: #0a7a84;

  /* Border Colors */
  --color-border: #dddce0;
  --color-border-light: #c5c4c9;
  --color-border-subtle: #efeef1;
  --color-border-emphasis: #8f8e95;
  --color-border-focus: #0e8a94;
  --color-hr: #dddce0;

  /* Selection - Using accent cyan */
  --color-selection-bg: rgba(10, 122, 132, 0.2);
  --color-selection-text: #086872;

  /* Shadows - Adjusted for light mode */
  --shadow-cta-glow: 0 10px 15px -3px rgba(10, 122, 132, 0.2);
  --shadow-teal-glow: 0 10px 15px -3px rgba(10, 122, 132, 0.2);
  --shadow-mega-menu: 0 20px 70px -15px rgba(10, 122, 132, 0.15);
  --shadow-footer-glow: 0 -20px 80px 20px rgba(10, 122, 132, 0.25),
    0 -8px 30px 5px rgba(10, 122, 132, 0.15);

  /* Opacity adjustments for light mode */
  --opacity-text-primary: 1;
  --opacity-text-secondary: 1;
  --opacity-text-muted: 1;
  --opacity-pattern: 0.04;
  --opacity-accent-medium: 0.15;
  --opacity-accent-strong: 0.25;

  /* Callout Colors - Using cyan accent tones */
  --color-callout-info-bg: rgba(59, 130, 246, 0.08);
  --color-callout-info-border: rgba(59, 130, 246, 0.25);
  --color-callout-info-icon: #2563eb;
  --color-callout-info-icon-bg: rgba(59, 130, 246, 0.15);

  --color-callout-warning-bg: rgba(245, 158, 11, 0.08);
  --color-callout-warning-border: rgba(245, 158, 11, 0.25);
  --color-callout-warning-icon: #f59e0b;
  --color-callout-warning-icon-bg: rgba(245, 158, 11, 0.15);

  --color-callout-error-bg: rgba(239, 68, 68, 0.08);
  --color-callout-error-border: rgba(239, 68, 68, 0.25);
  --color-callout-error-icon: #ef4444;
  --color-callout-error-icon-bg: rgba(239, 68, 68, 0.15);

  --color-callout-success-bg: rgba(34, 197, 94, 0.08);
  --color-callout-success-border: rgba(34, 197, 94, 0.25);
  --color-callout-success-icon: #22c55e;
  --color-callout-success-icon-bg: rgba(34, 197, 94, 0.15);

  --color-callout-tip-bg: rgba(168, 85, 247, 0.08);
  --color-callout-tip-border: rgba(168, 85, 247, 0.25);
  --color-callout-tip-icon: #a855f7;
  --color-callout-tip-icon-bg: rgba(168, 85, 247, 0.15);

  /* Note callout uses the cyan accent */
  --color-callout-note-bg: rgba(10, 122, 132, 0.08);
  --color-callout-note-border: rgba(10, 122, 132, 0.25);
  --color-callout-note-icon: #0a7a84;
  --color-callout-note-icon-bg: rgba(10, 122, 132, 0.15);

  /* Prose/Typography for light mode */
  --color-prose-body: #4a4c61;
  --color-prose-headings: #2b2d42;
  --color-prose-lead: #4a4c61;
  --color-prose-links: #0a7a84;
  --color-prose-bold: #2b2d42;
  --color-prose-counters: #6e7087;
  --color-prose-bullets: #0e8a94;
  --color-prose-quotes: #4a4c61;
  --color-prose-quote-borders: #0e8a94;
  --color-prose-captions: #6e7087;
  --color-prose-code: #086872;
  --color-prose-pre-code: #3c3836;
  --color-prose-pre-bg: #f9f5d7;
  --color-prose-table-borders: #dddce0;
  --color-prose-link-underline: rgba(10, 122, 132, 0.4);
  --color-prose-link-underline-hover: #0a7a84;
  --color-blockquote-bg: #e8f4f5;

  /* Code blocks for light mode - neutral light background */
  --color-code-block: #fafafa;
  --color-code-title: #f5f5f5;
  --color-code-highlight-bg: rgba(10, 122, 132, 0.12);
  --color-code-highlight-border: #0a7a84;
  --color-code-highlight-word: rgba(10, 122, 132, 0.15);
  --color-code-line-numbers: #6e7087;
  --color-code-border: #dddce0;

  /* Cal.com for light mode */
  --color-cal-bg: #f8f7f9;
  --color-cal-bg-emphasis: #efeef1;
  --color-cal-border: #dddce0;
  --color-cal-border-emphasis: #c5c4c9;
  --color-cal-border-subtle: #efeef1;
  --color-cal-text: #2b2d42;
  --color-cal-text-emphasis: #1a1b2e;
  --color-cal-text-muted: #4a4c61;
  --color-cal-text-subtle: #6e7087;
  --color-cal-brand: #0a7a84;
  --color-cal-brand-emphasis: #086872;
  --color-cal-brand-text: #ffffff;

  /* Component-specific for light mode */
  --color-spotlight-fill: rgba(10, 122, 132, 0.25);
  --color-nav-overlay: rgba(43, 45, 66, 0.4);
  --color-scroll-indicator-border: #c5c4c9;
  --color-scroll-indicator-dot: #6e7087;
  --color-tracing-beam-dot-active: #0a7a84;
  --color-tracing-beam-dot-inactive: #0e8a94;
  --color-tracing-beam-border-active: #086872;
  --color-tracing-beam-border-inactive: #0a7a84;
  --color-tracing-beam-line: #c5c4c9;

  /* SVG Grid Pattern for light mode */
  --color-svg-grid: #c5c4c9;

  /* Legacy aliases */
  --color-background: #f8f7f9;
  --color-foreground: #2b2d42;
  --color-muted: #6e7087;
}

/* =============================================================================
   BASE STYLES
   ============================================================================= */

@layer base {
  * {
    @apply box-border;
  }

  html {
    background-color: var(--color-base);
    overscroll-behavior: none;
  }

  body {
    background-color: var(--color-base);
    color: var(--color-text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overscroll-behavior: none;
    line-height: 1.7;
    font-family: var(--font-inter), system-ui, -apple-system, sans-serif;
  }

  /* Placeholder text - theme aware */
  ::placeholder {
    color: var(--color-text-muted);
    opacity: 1;
  }

  /* Keep Outfit for headings - better for display text */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-outfit), system-ui, -apple-system, sans-serif;
    letter-spacing: -0.02em;
  }

  /* Keep Outfit for UI elements that need brand consistency */
  button,
  [role="button"],
  nav,
  .font-display {
    font-family: var(--font-outfit), system-ui, -apple-system, sans-serif;
  }

  /* Utility class for body font when needed */
  .font-body {
    font-family: var(--font-inter), system-ui, -apple-system, sans-serif;
  }

  ::selection {
    background-color: var(--color-selection-bg);
    color: var(--color-selection-text);
  }

  a,
  button {
    @apply transition-all duration-200 ease-out;
  }

  :focus-visible {
    outline: 2px solid var(--color-border-focus);
    outline-offset: 2px;
  }
}

/* =============================================================================
   UTILITY CLASSES
   ============================================================================= */

@layer utilities {
  /* Section background utilities for visual rhythm */
  .section-base {
    background-color: var(--color-base);
  }

  .section-alt {
    background-color: var(--color-surface);
  }

  .section-elevated {
    background-color: var(--color-surface-elevated);
  }

  /* Animation keyframes */
  @keyframes gradient {
    0%,
    100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  /* Aceternity UI - Infinite scroll animation */
  @keyframes scroll {
    to {
      transform: translate(calc(-50% - 0.75rem));
    }
  }

  .animate-scroll {
    animation: scroll var(--animation-duration, 40s)
      var(--animation-direction, forwards) linear infinite;
  }

  /* Aceternity UI - Spotlight animation */
  @keyframes spotlight {
    0% {
      opacity: 0;
      transform: translate(-72%, -62%) scale(0.5);
    }
    100% {
      opacity: 1;
      transform: translate(-50%, -40%) scale(1);
    }
  }

  .animate-spotlight {
    animation: spotlight 2s ease 0.75s 1 forwards;
  }

  /* Theme transition utility */
  .theme-transition {
    transition: background-color 0.3s ease, color 0.3s ease,
      border-color 0.3s ease;
  }
}

/* =============================================================================
   MDX CONTENT TYPOGRAPHY
   Using CSS custom properties for theme awareness
   ============================================================================= */

.mdx-content {
  font-family: var(--font-inter), system-ui, -apple-system, sans-serif;
  color: var(--color-prose-body);
  line-height: 1.75;
}

/* Headings */
.mdx-content h1,
.mdx-content h2,
.mdx-content h3,
.mdx-content h4,
.mdx-content h5,
.mdx-content h6 {
  font-family: var(--font-outfit), system-ui, -apple-system, sans-serif;
  color: var(--color-prose-headings);
  scroll-margin-top: 6rem;
}

.mdx-content h1 {
  font-size: 2.25rem;
  font-weight: 700;
  margin-top: 2.5rem;
  margin-bottom: 1.5rem;
}

.mdx-content h2 {
  font-size: 1.875rem;
  font-weight: 700;
  margin-top: 2rem;
  margin-bottom: 1.2rem;
}

.mdx-content h3 {
  font-size: 1.5rem;
  font-weight: 600;
  margin-top: 1.75rem;
  margin-bottom: 1rem;
}

.mdx-content h4 {
  font-size: 1.25rem;
  font-weight: 600;
  margin-top: 1.5rem;
  margin-bottom: 0.875rem;
}

/* Anchor links on headings */
.mdx-content .anchor {
  color: var(--color-prose-headings);
  text-decoration: none;
}

.mdx-content .anchor:hover {
  color: var(--color-prose-links);
}

/* Paragraphs */
.mdx-content p {
  margin-bottom: 1rem;
  font-size: 1.125rem;
  line-height: 1.75;
  color: var(--color-prose-body);
}

.mdx-content .callout p {
  margin-bottom: 0.5rem;
}

/* Lists */
.mdx-content ul,
.mdx-content ol {
  margin-bottom: 1.5rem;
  padding-left: 1.5rem;
  color: var(--color-prose-body);
}

.mdx-content ul {
  list-style-type: disc;
}

.mdx-content ol {
  list-style-type: decimal;
}

.mdx-content li {
  font-size: 1.125rem;
  line-height: 1.75;
  margin-bottom: 0.5rem;
  color: var(--color-prose-body);
}

.mdx-content li::marker {
  color: var(--color-prose-bullets);
}

/* Nested lists */
.mdx-content ul ul,
.mdx-content ol ol,
.mdx-content ul ol,
.mdx-content ol ul {
  margin-top: 0.5rem;
  margin-bottom: 0;
}

/* Strong and emphasis */
.mdx-content strong {
  font-weight: 600;
  color: var(--color-prose-bold);
}

.mdx-content em {
  font-style: italic;
}

/* First paragraph after heading - no extra margin */
.mdx-content h1 + p,
.mdx-content h2 + p,
.mdx-content h3 + p,
.mdx-content h4 + p {
  margin-top: 0;
}

/* Horizontal rule */
.mdx-content hr {
  margin: 3rem 0;
  border-color: var(--color-hr);
}

/* Strikethrough (GFM) */
.mdx-content del {
  text-decoration: line-through;
  color: var(--color-text-muted);
}

/* Task lists (GFM) */
.mdx-content input[type="checkbox"] {
  margin-right: 0.5rem;
  accent-color: var(--color-accent-light);
}

/* Footnotes (GFM) */
.mdx-content .footnotes {
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 1px solid var(--color-border);
  font-size: 0.875rem;
}

.mdx-content .footnotes ol {
  padding-left: 1rem;
}

/* Code blocks from rehype-pretty-code */
/* Shiki dual theme switching - dark mode uses --shiki-dark, light uses --shiki-light */
[data-rehype-pretty-code-figure] pre,
[data-rehype-pretty-code-figure] code,
[data-rehype-pretty-code-figure] code span {
  color: var(--shiki-dark);
  background-color: var(--shiki-dark-bg);
}

:root[data-theme="light"] [data-rehype-pretty-code-figure] pre,
:root[data-theme="light"] [data-rehype-pretty-code-figure] code,
:root[data-theme="light"] [data-rehype-pretty-code-figure] code span,
html:not(.dark) [data-rehype-pretty-code-figure] pre,
html:not(.dark) [data-rehype-pretty-code-figure] code,
html:not(.dark) [data-rehype-pretty-code-figure] code span {
  color: var(--shiki-light);
  background-color: var(--shiki-light-bg);
}

.mdx-content pre {
  margin: 2rem 0;
  border-radius: 0.75rem;
  overflow-x: auto;
}

.mdx-content pre > code {
  display: grid;
  font-size: 0.875rem;
  line-height: 1.75;
}

.mdx-content pre code [data-line] {
  padding: 0.125rem 1rem;
  border-left: 2px solid transparent;
}

.mdx-content pre code [data-highlighted-line] {
  background-color: var(--color-code-highlight-bg);
  border-left-color: var(--color-code-highlight-border);
}

.mdx-content pre code .word {
  background-color: var(--color-code-highlight-word);
  border-radius: 0.25rem;
  padding: 0.125rem 0.25rem;
}

/* Line numbers */
.mdx-content pre code[data-line-numbers] {
  counter-reset: line;
}

.mdx-content pre code[data-line-numbers] > [data-line]::before {
  counter-increment: line;
  content: counter(line);
  margin-right: 1rem;
  text-align: right;
  display: inline-block;
  width: 1rem;
  color: var(--color-code-line-numbers);
}

/* Language label */
.mdx-content [data-rehype-pretty-code-title] {
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
  font-family: ui-monospace, monospace;
  color: var(--color-code-line-numbers);
  background-color: var(--color-code-title);
  border: 1px solid var(--color-border);
  border-bottom: none;
  border-radius: 0.75rem 0.75rem 0 0;
}

.mdx-content [data-rehype-pretty-code-title] + pre {
  margin-top: 0;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}

/* Figcaption for code blocks */
.mdx-content [data-rehype-pretty-code-caption] {
  margin-top: 0.5rem;
  text-align: center;
  font-size: 0.875rem;
  color: var(--color-prose-captions);
}

/* Prose container class for the article wrapper */
.prose-container {
  color: var(--color-prose-body);
}

/* Notion content - inherits same base styles as .mdx-content */
.notion-content {
  font-family: var(--font-inter), system-ui, -apple-system, sans-serif;
  color: var(--color-prose-body);
  line-height: 1.75;
  max-width: 100%;
  overflow-x: hidden;
}

/* Ensure embeds and iframes respect container width */
.notion-content iframe,
.notion-content twitter-widget,
.notion-content .twitter-tweet {
  max-width: 100% !important;
  width: 100% !important;
}

.notion-content figure {
  max-width: 100%;
  overflow: hidden;
}

/* react-tweet styling overrides to match theme */
.react-tweet {
  max-width: 100% !important;
  width: 100% !important;
}

/* Override react-tweet theme variables to match our design system */
.react-tweet-theme {
  --tweet-container-border: var(--color-border);
  --tweet-container-bg: var(--color-surface-elevated);
  --tweet-text-color: var(--color-text-primary);
  --tweet-text-color-secondary: var(--color-text-muted);
  --tweet-link-color: var(--color-accent-light);
  --tweet-border-color: var(--color-border);
  --tweet-font-family: var(--font-inter), system-ui, -apple-system, sans-serif;
}

/* Ensure react-tweet images and media are responsive */
.react-tweet img,
.react-tweet video {
  max-width: 100% !important;
  height: auto !important;
}

/* Ensure react-tweet container respects overflow */
.react-tweet-container {
  max-width: 100% !important;
  overflow: hidden;
}

.notion-content strong {
  font-weight: 600;
  color: var(--color-prose-bold);
}

.notion-content em {
  font-style: italic;
}

.notion-content a {
  color: var(--color-prose-links);
  text-decoration: underline;
  text-decoration-color: var(--color-prose-link-underline);
  text-underline-offset: 4px;
  transition: text-decoration-color 0.2s ease;
}

.notion-content a:hover {
  text-decoration-color: var(--color-prose-link-underline-hover);
}

/* Notion code blocks - Shiki dual theme switching */
/* Dark mode (default) - use --shiki-dark variable */
.dark .notion-code-block pre,
.dark .notion-code-block code,
.dark .notion-code-block span,
html.dark .notion-code-block pre,
html.dark .notion-code-block code,
html.dark .notion-code-block span {
  color: var(--shiki-dark);
  background-color: transparent;
}

/* Light mode - use --shiki-light variable */
:root[data-theme="light"] .notion-code-block pre,
:root[data-theme="light"] .notion-code-block code,
:root[data-theme="light"] .notion-code-block span,
html:not(.dark) .notion-code-block pre,
html:not(.dark) .notion-code-block code,
html:not(.dark) .notion-code-block span {
  color: var(--shiki-light);
  background-color: transparent;
}

/* Steps component - CSS counter for numbering */
.steps-container {
  counter-reset: step-counter;
}

.step-item {
  counter-increment: step-counter;
}

.step-number::before {
  content: counter(step-counter);
}

/* =============================================================================
   SHADCN/UI ROOT VARIABLES
   These are required for shadcn/ui components to work correctly
   Updated to use our theme colors for consistency
   ============================================================================= */

:root {
  --radius: 0.625rem;
  /* Light theme - matches our F8F7F9/2B2D42/92DCE5 palette */
  --background: #f8f7f9;
  --foreground: #2b2d42;
  --card: #ffffff;
  --card-foreground: #2b2d42;
  --popover: #ffffff;
  --popover-foreground: #2b2d42;
  --primary: #2f9aa8;
  --primary-foreground: #ffffff;
  --secondary: #efeef1;
  --secondary-foreground: #2b2d42;
  --muted: #efeef1;
  --muted-foreground: #6e7087;
  --accent: #92dce5;
  --accent-foreground: #2b2d42;
  --destructive: oklch(0.577 0.245 27.325);
  --border: #dddce0;
  --input: #dddce0;
  --ring: #92dce5;
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: #f8f7f9;
  --sidebar-foreground: #2b2d42;
  --sidebar-primary: #2f9aa8;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: #efeef1;
  --sidebar-accent-foreground: #2b2d42;
  --sidebar-border: #dddce0;
  --sidebar-ring: #92dce5;
}

.dark {
  /* Dark theme - matches our updated dark palette */
  --background: #0A1425;
  --foreground: rgba(255, 255, 255, 0.9);
  --card: #111F35;
  --card-foreground: rgba(255, 255, 255, 0.9);
  --popover: #111F35;
  --popover-foreground: rgba(255, 255, 255, 0.9);
  --primary: #1D9B69;
  --primary-foreground: #fcfcfc;
  --secondary: #1A2A45;
  --secondary-foreground: rgba(255, 255, 255, 0.9);
  --muted: #1A2A45;
  --muted-foreground: rgba(255, 255, 255, 0.5);
  --accent: #2AAE79;
  --accent-foreground: rgba(255, 255, 255, 0.9);
  --destructive: oklch(0.704 0.191 22.216);
  --border: #1A2A45;
  --input: #1A2A45;
  --ring: #2AAE79;
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: #111F35;
  --sidebar-foreground: rgba(255, 255, 255, 0.9);
  --sidebar-primary: #2AAE79;
  --sidebar-primary-foreground: #fcfcfc;
  --sidebar-accent: #1A2A45;
  --sidebar-accent-foreground: rgba(255, 255, 255, 0.9);
  --sidebar-border: #1A2A45;
  --sidebar-ring: #2AAE79;
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  /* Note: body background is handled by the earlier @layer base block
     which uses our theme's bg-base and text-text-primary classes */
}

/* =============================================================================
   THEME UTILITY OVERRIDES
   These override Tailwind's compiled utilities to use CSS variables,
   enabling theme switching. Placed outside @layer for highest specificity.
   ============================================================================= */

.bg-base {
  background-color: var(--color-base) !important;
}
.bg-surface {
  background-color: var(--color-surface) !important;
}
.bg-surface-elevated {
  background-color: var(--color-surface-elevated) !important;
}
.bg-footer-reveal {
  background-color: var(--color-footer-reveal) !important;
}
.text-text-primary {
  color: var(--color-text-primary) !important;
}
.text-text-secondary {
  color: var(--color-text-secondary) !important;
}
.text-text-muted {
  color: var(--color-text-muted) !important;
}
.border-border {
  border-color: var(--color-border) !important;
}
.bg-cta {
  background-color: var(--color-cta) !important;
}
.text-cta-text {
  color: var(--color-cta-text) !important;
}
.text-highlight {
  color: var(--color-highlight) !important;
}
.bg-accent {
  background-color: var(--color-accent) !important;
}
.text-accent {
  color: var(--color-accent) !important;
}
.text-accent-light {
  color: var(--color-accent-light) !important;
}

/* Gradient utilities - override Tailwind's compiled values */
.from-surface {
  --tw-gradient-from: var(--color-surface) !important;
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to) !important;
}
.to-surface {
  --tw-gradient-to: var(--color-surface) !important;
}
.via-base {
  --tw-gradient-via: var(--color-base) !important;
}
.to-base {
  --tw-gradient-to: var(--color-base) !important;
}
.from-base {
  --tw-gradient-from: var(--color-base) !important;
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to) !important;
}

/* Opacity variant overrides for navigation and overlays */
.bg-surface\/95 {
  background-color: color-mix(
    in srgb,
    var(--color-surface) 95%,
    transparent
  ) !important;
}
.bg-surface\/80 {
  background-color: color-mix(
    in srgb,
    var(--color-surface) 80%,
    transparent
  ) !important;
}
.bg-surface-elevated\/80 {
  background-color: color-mix(
    in srgb,
    var(--color-surface-elevated) 80%,
    transparent
  ) !important;
}
.bg-surface-elevated\/50 {
  background-color: color-mix(
    in srgb,
    var(--color-surface-elevated) 50%,
    transparent
  ) !important;
}
.bg-base\/60 {
  background-color: color-mix(
    in srgb,
    var(--color-base) 60%,
    transparent
  ) !important;
}
.bg-base\/95 {
  background-color: color-mix(
    in srgb,
    var(--color-base) 95%,
    transparent
  ) !important;
}

/* Accent opacity variants for glows and overlays */
.bg-accent\/4 {
  background-color: color-mix(
    in srgb,
    var(--color-accent) 4%,
    transparent
  ) !important;
}
.bg-accent\/5 {
  background-color: color-mix(
    in srgb,
    var(--color-accent) 5%,
    transparent
  ) !important;
}
.bg-accent\/8 {
  background-color: color-mix(
    in srgb,
    var(--color-accent) 8%,
    transparent
  ) !important;
}
.bg-accent\/10 {
  background-color: color-mix(
    in srgb,
    var(--color-accent) 10%,
    transparent
  ) !important;
}
.bg-accent\/15 {
  background-color: color-mix(
    in srgb,
    var(--color-accent) 15%,
    transparent
  ) !important;
}
.bg-accent\/20 {
  background-color: color-mix(
    in srgb,
    var(--color-accent) 20%,
    transparent
  ) !important;
}
.bg-accent\/25 {
  background-color: color-mix(
    in srgb,
    var(--color-accent) 25%,
    transparent
  ) !important;
}
.bg-accent\/30 {
  background-color: color-mix(
    in srgb,
    var(--color-accent) 30%,
    transparent
  ) !important;
}
.bg-accent\/40 {
  background-color: color-mix(
    in srgb,
    var(--color-accent) 40%,
    transparent
  ) !important;
}
.bg-accent\/50 {
  background-color: color-mix(
    in srgb,
    var(--color-accent) 50%,
    transparent
  ) !important;
}

/* Hero grid pattern - theme-aware */
.hero-grid-pattern {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke='%23E5E7EB'%3e%3cpath d='M0 .5H31.5V32'/%3e%3c/svg%3e");
  opacity: var(--opacity-pattern);
}

/* Light mode: darker grid lines for contrast */
html:not(.dark) .hero-grid-pattern {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke='%232B2D42'%3e%3cpath d='M0 .5H31.5V32'/%3e%3c/svg%3e");
  opacity: 0.06;
}

/* Hover state overrides for navigation */
.hover\:bg-surface-elevated:hover,
.lg\:hover\:bg-surface-elevated:hover,
.focus\:bg-surface-elevated:focus,
.lg\:focus\:bg-surface-elevated:focus {
  background-color: var(--color-surface-elevated) !important;
}

/* Responsive bg-surface-elevated for nav active states */
@media (min-width: 1024px) {
  .lg\:bg-surface-elevated {
    background-color: var(--color-surface-elevated) !important;
  }
}

/* Hover state overrides for theme-awareness */
.hover\:bg-surface:hover {
  background-color: var(--color-surface) !important;
}

/* Client logo filter - theme-aware */
.client-logo-filter {
  filter: brightness(0) invert(1);
  opacity: 0.6;
}

html:not(.dark) .client-logo-filter {
  filter: brightness(0);
  opacity: 0.6;
}

/* Amber text - darker in light mode for better contrast */
html:not(.dark) .text-amber-400 {
  color: #b45309 !important; /* amber-700 */
}

.hover\:text-text-primary:hover,
.lg\:hover\:text-text-primary:hover {
  color: var(--color-text-primary) !important;
}

.hover\:border-accent\/30:hover,
.group-hover\:border-accent\/30 {
  border-color: color-mix(
    in srgb,
    var(--color-accent) 30%,
    transparent
  ) !important;
}

.group-hover\:text-accent-light {
  color: var(--color-accent-light) !important;
}

/* Semantic color utilities - Info (for informational content) */
.text-info {
  color: var(--color-callout-info-icon) !important;
}
.bg-info {
  background-color: var(--color-callout-info-bg) !important;
}
.bg-info\/5 {
  background-color: var(--color-callout-info-bg) !important;
}
.bg-info\/10 {
  background-color: var(--color-callout-info-icon-bg) !important;
}
.bg-info\/15 {
  background-color: color-mix(
    in srgb,
    rgb(59, 130, 246) 15%,
    transparent
  ) !important;
}
.border-info {
  border-color: var(--color-callout-info-border) !important;
}
.border-info\/20 {
  border-color: var(--color-callout-info-border) !important;
}

/* Semantic color utilities - Success (for positive states) */
.text-success {
  color: var(--color-callout-success-icon) !important;
}
.bg-success {
  background-color: var(--color-callout-success-bg) !important;
}
.bg-success\/5 {
  background-color: var(--color-callout-success-bg) !important;
}
.bg-success\/10 {
  background-color: var(--color-callout-success-icon-bg) !important;
}
.border-success {
  border-color: var(--color-callout-success-border) !important;
}
.border-success\/20 {
  border-color: var(--color-callout-success-border) !important;
}
.border-success\/30 {
  border-color: color-mix(
    in srgb,
    rgb(34, 197, 94) 30%,
    transparent
  ) !important;
}

/* Semantic color utilities - Warning (for caution/attention) */
.text-warning {
  color: var(--color-callout-warning-icon) !important;
}
.bg-warning\/5 {
  background-color: var(--color-callout-warning-bg) !important;
}
.bg-warning\/10 {
  background-color: var(--color-callout-warning-icon-bg) !important;
}
.border-warning\/20 {
  border-color: var(--color-callout-warning-border) !important;
}

/* Semantic color utilities - Error/Danger (for errors, problems) */
.text-error {
  color: var(--color-callout-error-icon) !important;
}
.bg-error\/5 {
  background-color: var(--color-callout-error-bg) !important;
}
.bg-error\/10 {
  background-color: var(--color-callout-error-icon-bg) !important;
}
.border-error\/20 {
  border-color: var(--color-callout-error-border) !important;
}
.border-error\/30 {
  border-color: color-mix(
    in srgb,
    rgb(239, 68, 68) 30%,
    transparent
  ) !important;
}
.border-error\/50 {
  border-color: color-mix(
    in srgb,
    rgb(239, 68, 68) 50%,
    transparent
  ) !important;
}
.focus\:border-error:focus {
  border-color: rgb(239, 68, 68) !important;
}
.focus\:ring-error\/20:focus {
  --tw-ring-color: color-mix(
    in srgb,
    rgb(239, 68, 68) 20%,
    transparent
  ) !important;
}

/* Semantic color utilities - Tip (for tips, hints) */
.text-tip {
  color: var(--color-callout-tip-icon) !important;
}
.bg-tip\/5 {
  background-color: var(--color-callout-tip-bg) !important;
}
.bg-tip\/10 {
  background-color: var(--color-callout-tip-icon-bg) !important;
}
.border-tip\/20 {
  border-color: var(--color-callout-tip-border) !important;
}

/* Global custom scrollbar styling */
/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--color-border) transparent;
}

/* WebKit browsers (Chrome, Safari, Edge) */
*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

*::-webkit-scrollbar-track {
  background: transparent;
}

*::-webkit-scrollbar-thumb {
  background-color: var(--color-border);
  border-radius: 4px;
}

*::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-border-light);
}

/* Horizontal scrollbars */
*::-webkit-scrollbar:horizontal {
  height: 8px;
}

/* =============================================================================
   PERFORMANCE OPTIMIZATIONS

   CSS optimizations to improve Core Web Vitals (CLS, LCP, FID)
   ============================================================================= */

/* Reduce layout shifts by defining aspect ratios for images */
img {
  height: auto;
  max-width: 100%;
}

/* Optimize font rendering for faster text display */
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* Prevent layout shift from scrollbars */
html {
  scrollbar-gutter: stable;
  scroll-behavior: smooth;
}

/* GPU acceleration for smooth animations */
.animate-slide-in-from-bottom,
.animate-fade-in,
.animate-scale-in,
.group:hover {
  will-change: transform;
}

/* Contain paint for better performance */
section,
article,
main {
  contain: paint;
}

/* Optimize images for faster loading */
img[loading="lazy"] {
  content-visibility: auto;
}

/* Prevent CLS from web fonts */
.font-outfit,
.font-inter {
  font-display: swap;
  font-feature-settings: "liga" 1, "calt" 1;
}

/* Reduce repaints for fixed/sticky elements */
.sticky,
.fixed {
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Respect user preferences for motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Critical above-the-fold optimizations */
.above-fold {
  content-visibility: auto;
  contain-intrinsic-size: 0 500px;
}

/* Optimize images for Core Web Vitals */
img[fetchpriority="high"] {
  will-change: auto;
}

/* Reduce layout shift for async content */
.async-content {
  min-height: 200px;
  contain: layout style paint;
}

/* Optimize third-party embeds */
iframe {
  loading: lazy;
}

/* =============================================================================
   H1 FONT SIZE UTILITIES - INDUSTRY STANDARD

   Placed at END of file to ensure highest specificity in cascade.
   Uses @layer utilities to override Tailwind's generated utilities.

   Based on B2B SaaS best practices (2025):
   - Mobile (base): 30px (text-3xl)
   - Tablet (sm): 36px (text-4xl)
   - Desktop (md/lg): 48px max (text-5xl)

   Sources:
   - https://www.learnui.design/blog/mobile-desktop-website-font-size-guidelines.html
   - https://pimpmytype.com/font-size/

   CRITICAL: DO NOT MOVE these utilities. They MUST remain at the end of this
   file to prevent Tailwind v4 from overriding them during build.
   ============================================================================= */

@layer utilities {
  /* Font weights - ensure they work with variable fonts */
  .font-normal {
    font-weight: 400 !important;
  }
  .font-medium {
    font-weight: 500 !important;
  }
  .font-semibold {
    font-weight: 600 !important;
  }
  .font-bold {
    font-weight: 700 !important;
  }
  .font-extrabold {
    font-weight: 800 !important;
  }

  /* Base mobile sizes */
  .text-3xl {
    font-size: 1.875rem !important;       /* 30px - mobile H1 */
    line-height: 1.15;
  }

  .text-4xl {
    font-size: 2.25rem !important;        /* 36px - tablet H1 */
    line-height: 1.1;
  }

  .text-5xl {
    font-size: 3rem !important;           /* 48px - desktop H1 (max) */
    line-height: 1.1;
  }

  /* Tablet breakpoint (640px+) */
  @media (min-width: 640px) {
    .sm\:text-3xl {
      font-size: 1.875rem !important;     /* 30px */
    }
    .sm\:text-4xl {
      font-size: 2.25rem !important;      /* 36px */
    }
    .sm\:text-5xl {
      font-size: 3rem !important;         /* 48px */
    }
  }

  /* Medium desktop (768px+) */
  @media (min-width: 768px) {
    .md\:text-3xl {
      font-size: 1.875rem !important;     /* 30px */
    }
    .md\:text-4xl {
      font-size: 2.25rem !important;      /* 36px */
    }
    .md\:text-5xl {
      font-size: 3rem !important;         /* 48px */
    }
  }

  /* Large desktop (1024px+) - max recommended size */
  @media (min-width: 1024px) {
    .lg\:text-3xl {
      font-size: 1.875rem !important;     /* 30px */
    }
    .lg\:text-4xl {
      font-size: 2.25rem !important;      /* 36px */
    }
    .lg\:text-5xl {
      font-size: 3rem !important;         /* 48px */
    }
  }
}
